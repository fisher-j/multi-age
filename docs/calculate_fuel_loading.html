<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Redwoood multi-age experiment - 3&nbsp; Calculate fuel loading</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./work_log.html" rel="next">
<link href="./data_description.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./calculate_fuel_loading.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Calculate fuel loading</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Redwoood multi-age experiment</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_description.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data description</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./calculate_fuel_loading.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Calculate fuel loading</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./work_log.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Work log</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Calculate fuel loading</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyverse' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tibble' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'readr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'purrr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dplyr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'stringr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'forcats' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'lubridate' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<p>We used the line intercept method for tallying fine and coarse woody debris <span class="citation" data-cites="vanwagnerPracticalAspectsLine1982 brownHandbookInventoryingDowned1974">(<a href="#ref-vanwagnerPracticalAspectsLine1982" role="doc-biblioref">Van Wagner 1982</a>; <a href="#ref-brownHandbookInventoryingDowned1974" role="doc-biblioref">Brown 1974</a>)</span>. In essence, with this technique we are recording the diameters of all dead, downed woody pieces that cross an imaginary sampling plane of a specified length and height. These diameters are convered to crossectional areas which can then be extended to a volume by multiplying by a width. Finally, volume can be converted to mass using specific gravity. This method requires the assumptions that a particle is (1) cylidrical, (2) horizontal, and (3) perpendicular to the sampling plane. While (1) may be a reasonable assumption for many woody particles, 2 and 3 are less likely. For 2, we use a factor which allows us to trade out this assumption, for the assumption that pieces are randomly oriented in the horizontal plane. For 3, we use a correction factor (<span class="math inline">\(\sec \theta\)</span>) based estimates of average paticle inclination (<span class="math inline">\(\theta\)</span>).</p>
<p>In practice, the diameter of each piece is not measured, but tallied by size class (up to a certain size, after which it is prudent to measure individual pieces). We used the common time-lag size classes &lt; 0.635 cm; 0.635 - 2.54 cm; and 2.54 - 7.62 cm. All pieces larger than 7.62 cm were measured to the nearest cm. This requires estimating an average diameter (quadratic mean diameter is used) for pieces in each category which can be done using emperical data gathered from specific forest types <span class="citation" data-cites="brownHandbookInventoryingDowned1974">(<a href="#ref-brownHandbookInventoryingDowned1974" role="doc-biblioref">Brown 1974</a>)</span>, or estimated from the sampling distribution of the tallies themselves <span class="citation" data-cites="vanwagnerPracticalAspectsLine1982">(<a href="#ref-vanwagnerPracticalAspectsLine1982" role="doc-biblioref">Van Wagner 1982</a>)</span>.</p>
<p>The resulting equation for estimating fuel load (Mg) is:</p>
<p><span id="eq-load"><span class="math display">\[Load = \frac{\sum d^2  G  k  a  c}{l} \tag{3.1}\]</span></span></p>
<p>where d is diameter (cm), G is specific gravity, k=1.234 is a constant which accounts for random horizontal particle orientation, the density of water and unit conversion factors <span class="citation" data-cites="vanwagnerPracticalAspectsLine1982">(<a href="#ref-vanwagnerPracticalAspectsLine1982" role="doc-biblioref">Van Wagner 1982</a>)</span>, a is the particle inclination correction factor, c is the transect slope correction factor and l is the transect length. The calculation of a is described above and c is calculated as <span class="math inline">\(c = \sqrt{1 + (slope ratio)^2}\)</span>.</p>
<p>Thus in R, our basic fuel load function will look like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>simple_load <span class="ot">&lt;-</span> <span class="cf">function</span>(sum_d2, G, <span class="at">k =</span> <span class="fl">1.234</span>, a, percent_slope, l) {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  c <span class="ot">=</span> <span class="fu">sqrt</span>(<span class="dv">1</span> <span class="sc">+</span> (percent_slope <span class="sc">/</span> <span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  (sum_d2 <span class="sc">*</span> G <span class="sc">*</span> k <span class="sc">*</span> a <span class="sc">*</span> c) <span class="sc">/</span> l</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The “composite” values for G (for both sound and rotten wood), a, and the quadratic mean diameter of a size class (used for d) where provided by <span class="citation" data-cites="brownHandbookInventoryingDowned1974">Brown (<a href="#ref-brownHandbookInventoryingDowned1974" role="doc-biblioref">1974</a>)</span> for use when site specific data are unknown. The values given a pertain to “non-slash”. Somewhat larger values are used for slash fuel beds.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>params <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>source,        <span class="sc">~</span>parameter, <span class="sc">~</span>onehr, <span class="sc">~</span>tenhr, <span class="sc">~</span>hundhr, <span class="sc">~</span>thoushr_s, <span class="sc">~</span>thoushr_r,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"brown"</span>,        <span class="st">"d2"</span>,       <span class="fl">0.10</span>,   <span class="fl">1.86</span>,   <span class="fl">17.81</span>,   <span class="cn">NA</span>,         <span class="cn">NA</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"brown"</span>,        <span class="st">"G"</span>,        <span class="fl">0.48</span>,   <span class="fl">0.48</span>,   <span class="fl">0.40</span>,    <span class="fl">0.40</span>,       <span class="fl">0.30</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"brown"</span>,        <span class="st">"a"</span>,        <span class="fl">1.13</span>,   <span class="fl">1.13</span>,   <span class="fl">1.13</span>,    <span class="fl">1.00</span>,       <span class="fl">1.00</span>,</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"vanwagtendonk"</span>,<span class="st">"d2"</span>,       <span class="fl">0.12</span>,   <span class="fl">1.28</span>,   <span class="fl">14.52</span>,   <span class="cn">NA</span>,         <span class="cn">NA</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"vanwagtendonk"</span>,<span class="st">"G"</span>,        <span class="fl">0.58</span>,   <span class="fl">0.57</span>,   <span class="fl">0.53</span>,    <span class="fl">0.47</span>,       <span class="fl">0.36</span>,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"vanwagtendonk"</span>,<span class="st">"a"</span>,        <span class="fl">1.03</span>,   <span class="fl">1.02</span>,   <span class="fl">1.02</span>,    <span class="fl">1.02</span>,       <span class="fl">1.02</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>glebocki <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>id, <span class="sc">~</span>parameter, <span class="sc">~</span>onehr, <span class="sc">~</span>tenhr, <span class="sc">~</span>hundhr, <span class="sc">~</span>thoushr_s, <span class="sc">~</span>thoushr_r,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-0405"</span>, <span class="st">"a"</span>, <span class="fl">1.03</span>, <span class="fl">1.03</span>, <span class="fl">1.02</span>, <span class="fl">1.01</span>, <span class="fl">1.00</span>, </span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-0405"</span>, <span class="st">"d2"</span>, <span class="fl">0.13</span>, <span class="fl">1.32</span>, <span class="fl">16.13</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-0405"</span>, <span class="st">"G"</span>, <span class="fl">0.45</span>, <span class="fl">0.46</span>, <span class="fl">0.42</span>, <span class="fl">0.38</span>, <span class="fl">0.37</span>, </span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-0607"</span>, <span class="st">"a"</span>, <span class="fl">1.02</span>, <span class="fl">1.02</span>, <span class="fl">1.02</span>, <span class="fl">1.01</span>, <span class="fl">1.01</span>, </span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-0607"</span>, <span class="st">"d2"</span>, <span class="fl">0.10</span>, <span class="fl">1.21</span>, <span class="fl">20.90</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-0607"</span>, <span class="st">"G"</span>, <span class="fl">0.53</span>, <span class="fl">0.48</span>, <span class="fl">0.40</span>, <span class="fl">0.33</span>, <span class="fl">0.25</span>, </span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-0809"</span>, <span class="st">"a"</span>, <span class="fl">1.02</span>, <span class="fl">1.02</span>, <span class="fl">1.02</span>, <span class="fl">1.01</span>, <span class="fl">1.00</span>, </span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-0809"</span>, <span class="st">"d2"</span>, <span class="fl">0.12</span>, <span class="fl">1.27</span>, <span class="fl">19.24</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-0809"</span>, <span class="st">"G"</span>, <span class="fl">0.44</span>, <span class="fl">0.49</span>, <span class="fl">0.38</span>, <span class="fl">0.46</span>, <span class="fl">0.28</span>, </span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-1011"</span>, <span class="st">"a"</span>, <span class="fl">1.04</span>, <span class="fl">1.02</span>, <span class="fl">1.03</span>, <span class="fl">1.01</span>, <span class="fl">1.00</span>, </span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-1011"</span>, <span class="st">"d2"</span>, <span class="fl">0.10</span>, <span class="fl">1.48</span>, <span class="fl">21.72</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-1011"</span>, <span class="st">"G"</span>, <span class="fl">0.51</span>, <span class="fl">0.53</span>, <span class="fl">0.43</span>, <span class="fl">0.47</span>, <span class="fl">0.32</span>, </span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-C"</span>, <span class="st">"a"</span>, <span class="fl">1.02</span>, <span class="fl">1.02</span>, <span class="fl">1.01</span>, <span class="fl">1.02</span>, <span class="fl">1.02</span>, </span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-C"</span>, <span class="st">"d2"</span>, <span class="fl">0.12</span>, <span class="fl">1.28</span>, <span class="fl">17.74</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"85-C"</span>, <span class="st">"G"</span>, <span class="fl">0.47</span>, <span class="fl">0.41</span>, <span class="fl">0.31</span>, <span class="fl">0.30</span>, <span class="fl">0.30</span>, </span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-0405"</span>, <span class="st">"a"</span>, <span class="fl">1.02</span>, <span class="fl">1.02</span>, <span class="fl">1.01</span>, <span class="fl">1.01</span>, <span class="fl">1.00</span>, </span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-0405"</span>, <span class="st">"d2"</span>, <span class="fl">0.12</span>, <span class="fl">1.45</span>, <span class="fl">20.68</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-0405"</span>, <span class="st">"G"</span>, <span class="fl">0.42</span>, <span class="fl">0.51</span>, <span class="fl">0.41</span>, <span class="fl">0.36</span>, <span class="fl">0.29</span>, </span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-0607"</span>, <span class="st">"a"</span>, <span class="fl">1.03</span>, <span class="fl">1.05</span>, <span class="fl">1.02</span>, <span class="fl">1.01</span>, <span class="fl">1.01</span>, </span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-0607"</span>, <span class="st">"d2"</span>, <span class="fl">0.12</span>, <span class="fl">1.52</span>, <span class="fl">19.42</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-0607"</span>, <span class="st">"G"</span>, <span class="fl">0.46</span>, <span class="fl">0.43</span>, <span class="fl">0.43</span>, <span class="fl">0.37</span>, <span class="fl">0.27</span>, </span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-0809"</span>, <span class="st">"a"</span>, <span class="fl">1.03</span>, <span class="fl">1.04</span>, <span class="fl">1.01</span>, <span class="fl">1.01</span>, <span class="fl">1.00</span>, </span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-0809"</span>, <span class="st">"d2"</span>, <span class="fl">0.11</span>, <span class="fl">1.44</span>, <span class="fl">17.69</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-0809"</span>, <span class="st">"G"</span>, <span class="fl">0.47</span>, <span class="fl">0.51</span>, <span class="fl">0.44</span>, <span class="fl">0.46</span>, <span class="fl">0.41</span>, </span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-1011"</span>, <span class="st">"a"</span>, <span class="fl">1.02</span>, <span class="fl">1.03</span>, <span class="fl">1.01</span>, <span class="fl">1.00</span>, <span class="fl">1.00</span>, </span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-1011"</span>, <span class="st">"d2"</span>, <span class="fl">0.13</span>, <span class="fl">1.64</span>, <span class="fl">15.32</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-1011"</span>, <span class="st">"G"</span>, <span class="fl">0.49</span>, <span class="fl">0.52</span>, <span class="fl">0.47</span>, <span class="fl">0.43</span>, <span class="fl">0.32</span>, </span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-C"</span>, <span class="st">"a"</span>, <span class="fl">1.04</span>, <span class="fl">1.02</span>, <span class="fl">1.03</span>, <span class="fl">1.01</span>, <span class="fl">1.01</span>, </span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-C"</span>, <span class="st">"d2"</span>, <span class="fl">0.12</span>, <span class="fl">1.41</span>, <span class="fl">14.50</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9192-C"</span>, <span class="st">"G"</span>, <span class="fl">0.46</span>, <span class="fl">0.44</span>, <span class="fl">0.43</span>, <span class="fl">0.39</span>, <span class="fl">0.28</span>, </span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>  <span class="st">"97-0809"</span>, <span class="st">"a"</span>, <span class="fl">1.06</span>, <span class="fl">1.04</span>, <span class="fl">1.01</span>, <span class="fl">1.01</span>, <span class="fl">1.00</span>, </span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>  <span class="st">"97-0809"</span>, <span class="st">"d2"</span>, <span class="fl">0.12</span>, <span class="fl">1.81</span>, <span class="fl">20.35</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>  <span class="st">"97-0809"</span>, <span class="st">"G"</span>, <span class="fl">0.46</span>, <span class="fl">0.52</span>, <span class="fl">0.46</span>, <span class="fl">0.47</span>, <span class="fl">0.45</span>, </span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>  <span class="st">"97-1011"</span>, <span class="st">"a"</span>, <span class="fl">1.11</span>, <span class="fl">1.29</span>, <span class="fl">1.01</span>, <span class="fl">1.01</span>, <span class="fl">1.04</span>, </span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">"97-1011"</span>, <span class="st">"d2"</span>, <span class="fl">0.11</span>, <span class="fl">1.46</span>, <span class="fl">18.49</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">"97-1011"</span>, <span class="st">"G"</span>, <span class="fl">0.48</span>, <span class="fl">0.56</span>, <span class="fl">0.46</span>, <span class="fl">0.42</span>, <span class="fl">0.41</span>, </span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>  <span class="st">"97-C"</span>, <span class="st">"a"</span>, <span class="fl">1.02</span>, <span class="fl">1.01</span>, <span class="fl">1.03</span>, <span class="fl">1.08</span>, <span class="fl">1.00</span>, </span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>  <span class="st">"97-C"</span>, <span class="st">"d2"</span>, <span class="fl">0.12</span>, <span class="fl">1.40</span>, <span class="fl">18.63</span>,  <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>  <span class="st">"97-C"</span>, <span class="st">"G"</span>, <span class="fl">0.39</span>, <span class="fl">0.36</span>, <span class="fl">0.44</span>, <span class="fl">0.37</span>, <span class="fl">0.37</span>, </span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Currently this function summarizes data across all Glebocki plots, I could #</span></span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a><span class="co"># adapt this later if I only want to include some plots.</span></span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a>summarize_glebocki <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">|&gt;</span></span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(parameter) <span class="sc">|&gt;</span></span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span><span class="fu">round</span>(<span class="fu">mean</span>(.x), <span class="dv">2</span>))) <span class="sc">|&gt;</span></span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">source =</span> <span class="st">"glebocki"</span>, <span class="at">.before =</span> <span class="dv">1</span>)</span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a>params2 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(params, <span class="fu">summarize_glebocki</span>(glebocki)) <span class="sc">|&gt;</span> </span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(parameter)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>A study of Sierra Nevada conifers found these values to vary by species, and estimates of fuel loading ranged from 40% less to 8% more than when using those suggested by <span class="citation" data-cites="brownHandbookInventoryingDowned1974">Brown (<a href="#ref-brownHandbookInventoryingDowned1974" role="doc-biblioref">1974</a>)</span>. A study of young, treated redwood and Douglas-fir stands <span class="citation" data-cites="glebockiFuelLoadingMoisture2015">(<a href="#ref-glebockiFuelLoadingMoisture2015" role="doc-biblioref">Glebocki 2015</a>)</span> found similar values for G to those of <span class="citation" data-cites="brownHandbookInventoryingDowned1974">Brown (<a href="#ref-brownHandbookInventoryingDowned1974" role="doc-biblioref">1974</a>)</span>, and values for a much closer to those of <span class="citation" data-cites="vanwagtendonkPhysicalPropertiesWoody1996">Van Wagtendonk, Benedict, and Sydoriak (<a href="#ref-vanwagtendonkPhysicalPropertiesWoody1996" role="doc-biblioref">1996</a>)</span> (<a href="#tbl-params">Table&nbsp;<span>3.1</span></a>).</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-params" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;3.1: Physical properties of woody fuel particles used for calculating fuel loading from several different sources in the literature.</caption>
<thead>
<tr class="header">
<th style="text-align: left;">source</th>
<th style="text-align: left;">parameter</th>
<th style="text-align: right;">onehr</th>
<th style="text-align: right;">tenhr</th>
<th style="text-align: right;">hundhr</th>
<th style="text-align: right;">thoushr_s</th>
<th style="text-align: right;">thoushr_r</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">brown</td>
<td style="text-align: left;">G</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">0.40</td>
<td style="text-align: right;">0.40</td>
<td style="text-align: right;">0.30</td>
</tr>
<tr class="even">
<td style="text-align: left;">vanwagtendonk</td>
<td style="text-align: left;">G</td>
<td style="text-align: right;">0.58</td>
<td style="text-align: right;">0.57</td>
<td style="text-align: right;">0.53</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">0.36</td>
</tr>
<tr class="odd">
<td style="text-align: left;">glebocki</td>
<td style="text-align: left;">G</td>
<td style="text-align: right;">0.46</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">0.42</td>
<td style="text-align: right;">0.40</td>
<td style="text-align: right;">0.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">brown</td>
<td style="text-align: left;">a</td>
<td style="text-align: right;">1.13</td>
<td style="text-align: right;">1.13</td>
<td style="text-align: right;">1.13</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vanwagtendonk</td>
<td style="text-align: left;">a</td>
<td style="text-align: right;">1.03</td>
<td style="text-align: right;">1.02</td>
<td style="text-align: right;">1.02</td>
<td style="text-align: right;">1.02</td>
<td style="text-align: right;">1.02</td>
</tr>
<tr class="even">
<td style="text-align: left;">glebocki</td>
<td style="text-align: left;">a</td>
<td style="text-align: right;">1.04</td>
<td style="text-align: right;">1.05</td>
<td style="text-align: right;">1.02</td>
<td style="text-align: right;">1.02</td>
<td style="text-align: right;">1.01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">brown</td>
<td style="text-align: left;">d2</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">1.86</td>
<td style="text-align: right;">17.81</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">vanwagtendonk</td>
<td style="text-align: left;">d2</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: right;">1.28</td>
<td style="text-align: right;">14.52</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">glebocki</td>
<td style="text-align: left;">d2</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: right;">1.44</td>
<td style="text-align: right;">18.52</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The above information will allow us to calculate fuel loading for fine and coarse woody debris. First we’ll load our data and get the FWD (and the fuel particle parameters) in a long format for easier calculations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"./scripts/process_datasheets.r"</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">combine_fuels_datasheets</span>(<span class="st">"../data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Duplicates detected in `transects`
camp6 ld e 315: 2
camp6 ld n 315: 2
camp6 ld s 315: 2
camp6 ld w 315: 2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`
Joining with `by = join_by(transect)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use this to reduce the amount of typing when referring to transects</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>transectid <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"site"</span>, <span class="st">"treatment"</span>, <span class="st">"corner"</span>, <span class="st">"azi"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>get_particle_params <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">params =</span> params2, source) {</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  params[params<span class="sc">$</span>source <span class="sc">==</span> source, <span class="sc">!</span><span class="fu">names</span>(params) <span class="sc">%in%</span> <span class="st">"source"</span>] <span class="sc">|&gt;</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="sc">-</span><span class="fu">c</span>(parameter), <span class="at">names_to =</span> <span class="st">"class"</span>) <span class="sc">|&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">names_from =</span> parameter, <span class="at">values_from =</span> value)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>d1 <span class="ot">&lt;-</span> d<span class="sc">$</span>transects <span class="sc">|&gt;</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(transectid), slope, <span class="fu">matches</span>(<span class="st">"one|ten|hun"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(d<span class="sc">$</span>plots, site, treatment, <span class="fu">matches</span>(<span class="st">"one|ten|hun"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># move onehr, tenhr, etc to new column and create new columns for transect</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># length and particle counts</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">matches</span>(<span class="st">"count|len"</span>),</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"class"</span>, <span class="st">".value"</span>),</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">"_"</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">get_particle_params</span>(<span class="at">source =</span> <span class="st">"glebocki"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(site, treatment)`
Joining with `by = join_by(class)`</code></pre>
</div>
</div>
<p>Fine woody debris fuel loading can then be calculated.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>fwd <span class="ot">&lt;-</span> d1 <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">load =</span> <span class="fu">simple_load</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">sum_d2 =</span> count <span class="sc">*</span> d2,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">l =</span> length,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">percent_slope =</span> slope,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">G =</span> G,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">a =</span> a</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Coarse woody debris is already in a long format so we don’t need to pivot longer, but we will summarize the data for each transect by getting the sum of squared diameters. Also, we only have parameters for “sound” and “rotten” particles, so anything over decay class 3 will be considered “rotten”. Finally, we need to join in transect slopes, and transect lengths.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: fix camp6 ld azimuths</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"./scripts/test_funs.r"</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">warn_duplicates</span>(d<span class="sc">$</span>transects, site, treatment, corner, azi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Duplicates detected in `d$transects`
camp6 ld e 315: 2
camp6 ld n 315: 2
camp6 ld s 315: 2
camp6 ld w 315: 2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>coarse_woody <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">if_else</span>(decay <span class="sc">&gt;</span> <span class="dv">3</span>, <span class="st">"thoushr_r"</span>, <span class="st">"thoushr_s"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(site, treatment, corner, azi, class) <span class="sc">|&gt;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum_d2 =</span> <span class="fu">sum</span>(dia<span class="sc">^</span><span class="dv">2</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(d<span class="sc">$</span>transects[<span class="fu">c</span>(transectid, <span class="st">"slope"</span>)]) <span class="sc">|&gt;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(d<span class="sc">$</span>plots[<span class="fu">c</span>(<span class="st">"site"</span>, <span class="st">"treatment"</span>, <span class="st">"thoushr_length"</span>)]) <span class="sc">|&gt;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">get_particle_params</span>(<span class="at">source =</span> <span class="st">"glebocki"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">load =</span> <span class="fu">simple_load</span>(</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">sum_d2 =</span> sum_d2,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">G =</span> G,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">a =</span> a,</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">l =</span> thoushr_length,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">percent_slope =</span> slope</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(site, treatment, corner, azi)`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in left_join(summarize(group_by(mutate(d$coarse_woody, class = if_else(decay &gt; : Detected an unexpected many-to-many relationship between `x` and `y`.
ℹ Row 22 of `x` matches multiple rows in `y`.
ℹ Row 8 of `y` matches multiple rows in `x`.
ℹ If a many-to-many relationship is expected, set `relationship =
  "many-to-many"` to silence this warning.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(site, treatment)`
Joining with `by = join_by(class)`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 152 × 12
   site  treatment corner   azi class    sum_d2 slope thoushr_length     G     a
   &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 camp6 gs        e        225 thoushr…  173      72             10  0.4   1.02
 2 camp6 gs        e        315 thoushr…   72.2     1             10  0.33  1.01
 3 camp6 gs        e        315 thoushr… 1178.      1             10  0.4   1.02
 4 camp6 gs        n        135 thoushr…  216.      2             10  0.33  1.01
 5 camp6 gs        n        135 thoushr…  550.      2             10  0.4   1.02
 6 camp6 gs        n        225 thoushr…  676       4             10  0.4   1.02
 7 camp6 gs        s        315 thoushr…  254.      4             10  0.33  1.01
 8 camp6 gs        s        315 thoushr…  293.      4             10  0.4   1.02
 9 camp6 gs        w        135 thoushr…  424.     17             10  0.33  1.01
10 camp6 gs        w        135 thoushr…  882.     17             10  0.4   1.02
# ℹ 142 more rows
# ℹ 2 more variables: d2 &lt;dbl&gt;, load &lt;dbl&gt;</code></pre>
</div>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-brownHandbookInventoryingDowned1974" class="csl-entry" role="listitem">
Brown, James K. 1974. <span>“Handbook for Inventorying Downed Woody Material.”</span> <em>Gen. Tech. Rep. INT-16. Ogden, UT: US Department of Agriculture, Forest Service, Intermountain Forest and Range Experiment Station. 24 p.</em> 16.
</div>
<div id="ref-glebockiFuelLoadingMoisture2015" class="csl-entry" role="listitem">
Glebocki, Radoslaw. 2015. <span>“Fuel Loading and Moisture Dynamics in Thinned Coast Redwood Forests in <span>Headwaters Forest Reserve</span>, <span>California</span>.”</span> Master’s thesis, Humboldt State University. <a href="https://scholarworks.calstate.edu/concern/theses/ws859j014">https://scholarworks.calstate.edu/concern/theses/ws859j014</a>.
</div>
<div id="ref-vanwagnerPracticalAspectsLine1982" class="csl-entry" role="listitem">
Van Wagner, C. E. 1982. <span>“Practical Aspects of the Line Intersect Method.”</span> PI-X-12. <span>Chalk River, Ontario, Canada</span>: <span>Petawawa National Forestry Institute, Canadian Forestry Service</span>.
</div>
<div id="ref-vanwagtendonkPhysicalPropertiesWoody1996" class="csl-entry" role="listitem">
Van Wagtendonk, J. W., J. M. Benedict, and W. M. Sydoriak. 1996. <span>“Physical Properties of Woody Fuel Particles of <span>Sierra Nevada</span> Conifers.”</span> <em>International Journal of Wildland Fire</em> 6 (3): 117–23. <a href="https://doi.org/10.1071/wf9960117">https://doi.org/10.1071/wf9960117</a>.
</div>
</div>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./data_description.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data description</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./work_log.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Work log</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>