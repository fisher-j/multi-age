[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Redwoood multi-age experiment",
    "section": "",
    "text": "1 Introduction\nThis is an analysis of the 10-year remeasure of the Redwood multi-age experiment. It was started by Dr. Pascal Berrill, professor of silviculture at Cal-Poly Humboldt. The experiment is located in the Jackson Demonstration State Forest in Mendocino County, California. The multi-age experiment explores the regeneration response of several species following different harvesting techniques including group selection, aggregated retention, and high/low dispersed retention. The 10-year remeasure data includes surface fuel characterization."
  },
  {
    "objectID": "data_description.html#fuel-data",
    "href": "data_description.html#fuel-data",
    "title": "2  Data description",
    "section": "2.1 Fuel data",
    "text": "2.1 Fuel data\nThe fuel data was gathered in the spring of 2022 and 2023. The Firemon protocol was used as the basis for data collection which in turn employs the use of Brown’s transects, with the addition of duff, litter, and vegetation density sampling stations at two locations along each transect (Section 2.1.3). While the firemon protocol specifies a 2 meter tall imaginary cylinder for quantifying surface fuels, because our resprouting trees were continuous with the ground, we used an imaginary cylinder with a variable height, up to the tallest shrub or sprout fuels that were continuous to the ground.\nTwo 10-meter transects were installed parallel to plot edges at each macro plot corner. Their near ends shared a point inset 10 meters from the corner, towards plot center (Figure 2.1). Downed, woody fuels in four size classes were counted starting from the far end of the transect and each fuel size class was counted for a specified lenght of the total transect (generally longer for larger fuels).\nAt two stations along each transect, duff, litter, live and dead vegetation density (as height and percent cover), and fuel bed depth were assessed. Details of each of these values are described below (Section 2.1.3)\nThe notion of fuel bed depth is notably absent from the Firemon protocol, so we added it by estimating an “average” fuel bed depth within the vegetation sampling cylinder that included litter, and all downed woody debris.\nDominant (well represented) woody speices were also recorded in the vegetation cylinders.\n\n\n\nFigure 2.1: A diagram of the fuel sampling design depicting 0.4 hectare macro plot, fuels transects, transect stations, and vegetation sub-plots. Large green circles are vegetation monitoring plots (which are mostly used for tracking species composition) and the small orange circles are transect stations where duff, litter, and live and dead vegetation density were measured.\n\n\n\n2.1.1 Data entry\nData was entered using Excel and exported as a UTF-8 csv. The file format (Figure 2.2) was defined to resemble the physical datasheets as closely as possible, while maintaining data integretity and facilitating ease of input. There is one file for each macro plot (or replicate = site + treatment combination).\nEach file includes sections for different tables, and these are separated by a line that contains only a single hashtag (e.g., “#duff_litter_fbd”) in lowercase letters with underscores for spaces. In Excel, the #hashtag should go in the first cell of a row, with nothing esle in the row. There should be no blank rows before or after hashtags. The table sections used don’t correlate 1:1 with physical datasheet tables. For instance, columns for “metermeark1” and “metermark2” were added to reflect the fact that initially we sampled duff, litter and vegetation density (transect stations) at 5 and 10 m, but later we moved the stations to 5 and 9 m. The “1” and “2” following repeated variable names refers to one of these locations along the transect. The function used to wrangle these data matches rows based on transect number and columns based on column names. Thus, it is possible to rearrage the rows or columns within each section as long as column names are kept consistent and data for each transect have the same transect number. Following are the section and column labels used for each section of the plot data entry form with any notes regarding their format. A complete description of the data varialbes can be found in Section 2.1.3.\n\n#site_info site treatment\n\ndate\nonehr\ntenhr\nhundhr\nthoushr\ntrans_count notes (site level notes, should not contain commas)\n\n#transects\n\ntransect (number 1 through 8, corresponds with transect column in other sections)\ncorner\nazi\nfwd_crew\nveg_crew (moved from vegetation table to here)\nslope\nmetermark1 (location along transect of first station)\nmetermark2 (location along transect of second station)\nnotes (transect specific notes)\n\n#duff_litter_fbd\n\ntransect (number 1 through 8)\nonehr\ntenhr\nhundhr\nduff_litter1\npct_litter1\nfbd1\nduff_litter2\npct_litter2\nfbd2\n\n#vegetation\n\ntransect (number 1 though 8)\nlive_woody1\ndead_woody1\navg_w_ht1\nlive_herb1\ndead_herb1\navg_h_ht1\nlive_woody2\ndead_woody2\navg_w_ht2\nlive_herb2\ndead_herb2\navg_h_ht2\n\n#woody_species\n\ntransect\nspecies1 (space-delimited list of ‘significant’ species)\nspecies2 (space-delimited list of ‘significant’ species)\n\n#coarse_woody_debris\n\ntransect\ndia\ndecay\n\n\n\n\n\nFigure 2.2: Screenshot of an examle of the datasheet entry format. Each section, defined by a begining hashtag is parsed by an r function as a seperate table.\n\n\nAn R function is used to parse this file into individual tables. As part of this process, all the table sections whose rows have a 1:1 relationship with transects are combined into one wide table, based on the transect column.\n\n\nCode\nsource(\"./scripts/test_funs.r\")\n\n# This function processess one datasheet and returns three tables that can\n# be combined with corresponding tables from other data sheets\nwrangle_datasheet &lt;- function(file) {\n  con &lt;- file(file, encoding = \"UTF-8\")\n  lines &lt;- readLines(con)\n  close(con)\n\n  # Remove BOM &lt;https://stackoverflow.com/a/67906611&gt;\n  lines[1] &lt;- gsub(\"\\\\xef\\\\xbb\\\\xbf\", \"\", lines[1], useBytes = TRUE)\n\n  # These are the sections I want to extract\n  to_get &lt;- c(\n    \"site_data\", \"transects\", \"duff_litter_fbd\", \"vegetation\",\n    \"woody_species\", \"coarse_woody_debris\"\n  )\n  # sections are defined by line with only a hashtage (#section)\n  section_pattern &lt;- \"^#(\\\\w+).*$\"\n\n  # find hashtags and get the data from the next line to the line\n  # before the next hashtag\n  section_breaks &lt;- grep(section_pattern, lines)\n  section_start &lt;- section_breaks + 1\n  section_end &lt;- c(section_breaks[-1], length(lines)) - 1\n  section_names &lt;- gsub(section_pattern, \"\\\\1\", lines[section_breaks])\n\n  sections &lt;- purrr::map2(section_start, section_end, \\(x, y) c(x, y)) |&gt;\n    setNames(section_names) |&gt;\n    (`[`)(to_get) |&gt;\n    purrr::map(\\(x) lines[seq.int(x[1], x[2])]) |&gt;\n    # collapse sections to strings so they can be read as if they were files\n    purrr::map(\\(x) paste(x, collapse = \"\\n\")) |&gt;\n    # leave empty column names so they can be removed\n    purrr::map(\\(x) \n      readr::read_csv(x, show_col_types = FALSE, name_repair = \"minimal\", progress = FALSE)\n    ) |&gt;\n    # Remove empty columns\n    purrr::map(\\(x) x[!names(x) %in% \"\"])\n\n  # I'm going to combine these into a wide table because each row is a transect.\n  # Further data wrangling will require expanding the stations within transecs.\n  # also need to make sure the rows have site data and transect ids for the\n  # coarse woody debris.\n  transect_data &lt;- c(\n    \"transects\", \"duff_litter_fbd\", \"vegetation\", \"woody_species\"\n  )\n\n  transects &lt;- sections |&gt;\n    (`[`)(transect_data) |&gt;\n    purrr::reduce(dplyr::left_join, by = \"transect\") |&gt;\n    # differentiate between transect lenghts and particle counts\n    dplyr::rename_with(\\(x) paste0(x, \"_count\"), ends_with(\"hr\")) |&gt;\n    dplyr::mutate(\n      sections$site_data[c(\"site\", \"treatment\")],\n      .before = corner\n    ) |&gt;\n    dplyr::select(-transect)\n\n  coarse_woody_debris &lt;- sections$coarse_woody_debris |&gt;\n    dplyr::mutate(\n      sections$site_data[c(\"site\", \"treatment\")],\n      .after = transect\n    ) |&gt;\n    dplyr::left_join(\n      sections$transects[c(\"transect\", \"corner\", \"azi\")]\n    ) |&gt;\n    dplyr::select(c(site, treatment, corner, azi, dia, decay))\n  \n  plots &lt;- sections$site_data |&gt;\n    # differentiate between transect lenghts and particle counts\n    dplyr::rename_with(\\(x) paste0(x, \"_length\"), ends_with(\"hr\"))\n\n  # I'll add a check to make sure that all transects and plots are unique\n  warn_duplicates(transects, site, treatment, corner, azi)\n  warn_duplicates(plots, site, treatment)\n\n  # Final output with three tables. These will be combined with corresponding\n  # tables from other datasheets.\n  list(\n    plots = plots,\n    transects = transects,\n    coarse_woody = coarse_woody_debris\n  )\n}\n\ndata_dir &lt;- \"../data\"\n\n# Combine fuels data for each plot\n#\n# This function expects all fuel datasheets to begin with \"fuel\" and end with\n# \"csv\". It loads all matching files in a given folder and returns the same\n# tables as `wrangle_datasheet`, but for all plots combined.\ncombine_fuels_datasheets &lt;- function(data_dir) {\n  files &lt;- list.files(data_dir, pattern = \"^fuel.*csv$\", full.names = TRUE)\n  sheets_list &lt;- purrr::map(files, wrangle_datasheet)\n  table_names &lt;- purrr::set_names(names(sheets_list[[1]]))\n  purrr::map(table_names, \\(x) purrr::list_rbind(purrr::map(sheets_list, x)))\n}\n\n\n# this is how to pivot station data to longer format\n# d |&gt;\n#   tidyr::pivot_longer(\n#     cols = !c(site, treatment, corner, azi),\n#     names_to = \".value\",\n#     names_pattern = \"(\\\\w+)[12]$\"\n#   )\n\n\nThe resulting data looks like this:\n\nwrangle_datasheet(\"../data/fuel_waldon_gs.csv\")\n\nJoining with `by = join_by(transect)`\n\n\n$plots\n# A tibble: 1 × 9\n  site   treatment date   onehr_length tenhr_length hundhr_length thoushr_length\n  &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;\n1 waldon gs        3/15/…            2            2             4             10\n# ℹ 2 more variables: trans_count &lt;dbl&gt;, notes &lt;chr&gt;\n\n$transects\n# A tibble: 8 × 33\n  site   treatment corner   azi fwd_crew veg_crew slope metermark1 metermark2\n  &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;\n1 waldon gs        n        135 jf       ac           4          5         10\n2 waldon gs        n        248 jf       ac          19          5         10\n3 waldon gs        w         45 dr       dr           8          5         10\n4 waldon gs        w        135 dr       dr          20          5         10\n5 waldon gs        s         45 dr       jf           5          5         10\n6 waldon gs        s        315 dr       jf           5          5         10\n7 waldon gs        e        225 dr       jf           8          5          9\n8 waldon gs        e        315 dr       jf          13          5          9\n# ℹ 24 more variables: notes &lt;chr&gt;, onehr_count &lt;dbl&gt;, tenhr_count &lt;dbl&gt;,\n#   hundhr_count &lt;dbl&gt;, duff_litter1 &lt;dbl&gt;, pct_litter1 &lt;dbl&gt;, fbd1 &lt;dbl&gt;,\n#   duff_litter2 &lt;dbl&gt;, pct_litter2 &lt;dbl&gt;, fbd2 &lt;dbl&gt;, live_woody1 &lt;dbl&gt;,\n#   dead_woody1 &lt;dbl&gt;, avg_w_ht1 &lt;dbl&gt;, live_herb1 &lt;dbl&gt;, dead_herb1 &lt;dbl&gt;,\n#   avg_h_ht1 &lt;dbl&gt;, live_woody2 &lt;dbl&gt;, dead_woody2 &lt;dbl&gt;, avg_w_ht2 &lt;dbl&gt;,\n#   live_herb2 &lt;dbl&gt;, dead_herb2 &lt;dbl&gt;, avg_h_ht2 &lt;dbl&gt;, species1 &lt;chr&gt;,\n#   species2 &lt;chr&gt;\n\n$coarse_woody\n# A tibble: 20 × 6\n   site   treatment corner   azi   dia decay\n   &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 waldon gs        n        135     9     5\n 2 waldon gs        n        135    13     2\n 3 waldon gs        n        248    48     3\n 4 waldon gs        n        248    10     5\n 5 waldon gs        w         45    16     5\n 6 waldon gs        w         45    15     5\n 7 waldon gs        w         45    14     5\n 8 waldon gs        w         45    14     5\n 9 waldon gs        w        135    32     3\n10 waldon gs        w        135    12     4\n11 waldon gs        w        135    30     5\n12 waldon gs        s         45    28     4\n13 waldon gs        s         45    42     5\n14 waldon gs        s        315    26     3\n15 waldon gs        e        225    15     4\n16 waldon gs        e        225    13     3\n17 waldon gs        e        225    18     5\n18 waldon gs        e        225    34     3\n19 waldon gs        e        315    26     4\n20 waldon gs        e        315    12     5\n\n\nWhile the wide format for the transect data is not ideal, it is convenient because it reduces the number of tables we are dealing with. This will require extra work at analysis time to expand the data variables which are followed by a “1” or “2”, which represent different stations (Section 2.1.3) on the same transect. To analze these data, they will first need to be pivoted into a longer format, where the station (1 or 2) becomes an explicit column.\n\n\n2.1.2 Data variable descriptions\nThe following is a descripton of the data variables for each of the tables in the data list. So, the $plots heading refers to the table found in data$plots. This data structure is subject to change, but for now, has 3 tables. $plots has plot level data including the lengths of transects (which are the same across all transects, but included for clarity). $transects contains all the fuel data associated with a given transect, including both sampling stations, in wide format (one row for each transect). Finally, $coarse_woody contains coarse woody debris in a long format (multiple rows for each transect).\n\n\n2.1.3 Station sampling cylinder\nReference is made the station sampling cylinder below. It is an imaginary, vertical cylinder with a radius of 1 meter and a variable height equal to the maxiumm height of sprout or shrub vegetation within the cylinders radius. There are two sampling cylinders on each transect and their centers are defined by the transects’ two metermarks. Duff, litter, and fuel bed depth in addition to the vegetation measurements, are all recorded within these cylinders.\n\n\n2.1.4 $plots\n\n\n\n\n\n\n\nVariable\nDescription\n\n\n\n\nsite\n\n\n\ntreatment\n\n\n\ndate\n\n\n\nonehr\nDistance from end of transect for which 1-hr fuels were counted\n\n\ntenhr\nDistance from end of transect for which 10-hr fuels were counted\n\n\nhundhr\nDistance from end of transect for which 100-hr fuels were counted\n\n\nthoushr\nDistance from end of transect for which 1000-hr fuels were counted\n\n\ntrans_count\nnumber of transects on macro plot\n\n\nnotes\n\n\n\n\n\n\n2.1.5 $transects\n\n\n\n\n\n\n\nVariable\nDescription\n\n\n\n\nsite\nOne of four different sites: whiskey, waldon, waldos, and camp6\n\n\ntreatment\nOne of HD=High density, dispersed retention, LD=Low density dispersed retention, MD=Medium densty dispersed retention, HA=High density aggreagated retention, GS=Group selection opening (1 ha, centered on plot)\n\n\ncorner\nOne of n,s,e,w for “diamond” plost and one of ne, nw, se, sw for “square” plots\n\n\nazi\nactual azimuth from corner to end of fuel transect, deg\n\n\nfwd_crew\nInitials of person performing fuel counts and measuring litter, duff, and FBD\n\n\nveg_crew\nInitials of person estimating vegetation cover\n\n\nslope\nslope in percent, measured with clinometer\n\n\nmetermark1\nlocantion along transect of first veg. station m\n\n\nmetermark2\nlocantion along transect of first veg. station m\n\n\nnotes\nTransect specific notes\n\n\nonehr\nCount of down woody fuels &lt;0.6 cm for the lenght of the 1-hr transect, redwood leaflets less than about 2 mm were not counted as one hour fuels\n\n\ntenhr\nCount of down woody fuels &gt;= 0.6 and &lt; 2.5 cm\n\n\nhundhr\nCount of down woody fuels &gt;= 2.5 and &lt; 8 cm\n\n\nduff_litter1\nCombined duff and litter depth from a representative location within a 1-meter radius circle centered at metermark, cm\n\n\npct_litter1\nPercent of duff_litter depth compose of litter: percent\n\n\nfbd1\nEstimated average height of litter and downed woody debris within the sampling cylinder, 1 m radius, centered at metermark\n\n\nduff_litter2\n\n\n\npct_litter2\n\n\n\nfbd2\n\n\n\nlive_woody1\nTotal projected ground cover of all live woody plant parts within 1-meter-radius sampling cylinder of height equal to the height of the shrub or sprout vegetaion within the cylinders radius, 0-100 percent\n\n\ndead_woody1\nTotal projected ground cover of all dead woody plant parts connected to live or standing dead plants, within the sampling cylinder 0-100 percent\n\n\navg_w_ht1\nAverage maximum height of all live and dead woody plants in sampling cylinder (see Estimating Height in Firemon protocol)\n\n\nlive_herb1\nTotal projected ground cover of live herbs in the sampling cylinder\n\n\ndead_herb1\nTotal projected ground cover of dead herbs in the sampling cylinder\n\n\navg_h_ht1\nAverage maximum height of live and dead herbs in the sampling cylinder\n\n\nlive_woody2\n\n\n\ndead_woody2\n\n\n\navg_w_ht2\n\n\n\nlive_herb2\n\n\n\ndead_herb2\n\n\n\navg_h_ht2\n\n\n\nspecies1\nDominant woody species within sampling cylinder, each species is assumed to occupy an equal portion of volume, under-represented species are ignored\n\n\nspecies2\n\n\n\n\n\n\n2.1.6 $coarse_woody\n\n\n\n\n\n\n\nVariable\nDescription\n\n\n\n\nsite\n\n\n\ntreatment\n\n\n\ncorner\n\n\n\nazi\n\n\n\ndia\n\n\n\ndecay\nDecay class 1-5, 1=Fine branches still present, 2=Some branches and bark missing, 3=most branches and much bark missing potentially minor decay, 4=Significant decay, 5=Almost completely rotten"
  },
  {
    "objectID": "calculate_fuel_loading.html",
    "href": "calculate_fuel_loading.html",
    "title": "3  Calculate fuel loading",
    "section": "",
    "text": "library(tidyverse)\n\nWarning: package 'tidyverse' was built under R version 4.2.3\n\n\nWarning: package 'tibble' was built under R version 4.2.3\n\n\nWarning: package 'tidyr' was built under R version 4.2.3\n\n\nWarning: package 'readr' was built under R version 4.2.3\n\n\nWarning: package 'purrr' was built under R version 4.2.3\n\n\nWarning: package 'dplyr' was built under R version 4.2.3\n\n\nWarning: package 'stringr' was built under R version 4.2.3\n\n\nWarning: package 'forcats' was built under R version 4.2.3\n\n\nWarning: package 'lubridate' was built under R version 4.2.3\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\nWe used the line intercept method for tallying fine and coarse woody debris (Van Wagner 1982; Brown 1974). In essence, with this technique we are recording the diameters of all dead, downed woody pieces that cross an imaginary sampling plane of a specified length and height. These diameters are convered to crossectional areas which can then be extended to a volume by multiplying by a width. Finally, volume can be converted to mass using specific gravity. This method requires the assumptions that a particle is (1) cylidrical, (2) horizontal, and (3) perpendicular to the sampling plane. While (1) may be a reasonable assumption for many woody particles, 2 and 3 are less likely. For 2, we use a factor which allows us to trade out this assumption, for the assumption that pieces are randomly oriented in the horizontal plane. For 3, we use a correction factor (\\(\\sec \\theta\\)) based estimates of average paticle inclination (\\(\\theta\\)).\nIn practice, the diameter of each piece is not measured, but tallied by size class (up to a certain size, after which it is prudent to measure individual pieces). We used the common time-lag size classes &lt; 0.635 cm; 0.635 - 2.54 cm; and 2.54 - 7.62 cm. All pieces larger than 7.62 cm were measured to the nearest cm. This requires estimating an average diameter (quadratic mean diameter is used) for pieces in each category which can be done using emperical data gathered from specific forest types (Brown 1974), or estimated from the sampling distribution of the tallies themselves (Van Wagner 1982).\nThe resulting equation for estimating fuel load (Mg) is:\n\\[Load = \\frac{\\sum d^2  G  k  a  c}{l} \\tag{3.1}\\]\nwhere d is diameter (cm), G is specific gravity, k=1.234 is a constant which accounts for random horizontal particle orientation, the density of water and unit conversion factors (Van Wagner 1982), a is the particle inclination correction factor, c is the transect slope correction factor and l is the transect length. The calculation of a is described above and c is calculated as \\(c = \\sqrt{1 + (slope ratio)^2}\\).\nThus in R, our basic fuel load function will look like this:\n\nsimple_load &lt;- function(sum_d2, G, k = 1.234, a, percent_slope, l) {\n  c = sqrt(1 + (percent_slope / 100)^2)\n  (sum_d2 * G * k * a * c) / l\n}\n\nThe “composite” values for G (for both sound and rotten wood), a, and the quadratic mean diameter of a size class (used for d) where provided by Brown (1974) for use when site specific data are unknown. The values given a pertain to “non-slash”. Somewhat larger values are used for slash fuel beds.\n\n\nCode\nparams &lt;- dplyr::tribble(\n  ~source,        ~parameter, ~onehr, ~tenhr, ~hundhr, ~thoushr_s, ~thoushr_r,\n  \"brown\",        \"d2\",       0.10,   1.86,   17.81,   NA,         NA,\n  \"brown\",        \"G\",        0.48,   0.48,   0.40,    0.40,       0.30,\n  \"brown\",        \"a\",        1.13,   1.13,   1.13,    1.00,       1.00,\n  \"vanwagtendonk\",\"d2\",       0.12,   1.28,   14.52,   NA,         NA,\n  \"vanwagtendonk\",\"G\",        0.58,   0.57,   0.53,    0.47,       0.36,\n  \"vanwagtendonk\",\"a\",        1.03,   1.02,   1.02,    1.02,       1.02,\n)\n\nglebocki &lt;- dplyr::tribble(\n  ~id, ~parameter, ~onehr, ~tenhr, ~hundhr, ~thoushr_s, ~thoushr_r,\n  \"85-0405\", \"a\", 1.03, 1.03, 1.02, 1.01, 1.00, \n  \"85-0405\", \"d2\", 0.13, 1.32, 16.13,  NA, NA,\n  \"85-0405\", \"G\", 0.45, 0.46, 0.42, 0.38, 0.37, \n  \"85-0607\", \"a\", 1.02, 1.02, 1.02, 1.01, 1.01, \n  \"85-0607\", \"d2\", 0.10, 1.21, 20.90,  NA, NA,\n  \"85-0607\", \"G\", 0.53, 0.48, 0.40, 0.33, 0.25, \n  \"85-0809\", \"a\", 1.02, 1.02, 1.02, 1.01, 1.00, \n  \"85-0809\", \"d2\", 0.12, 1.27, 19.24,  NA, NA,\n  \"85-0809\", \"G\", 0.44, 0.49, 0.38, 0.46, 0.28, \n  \"85-1011\", \"a\", 1.04, 1.02, 1.03, 1.01, 1.00, \n  \"85-1011\", \"d2\", 0.10, 1.48, 21.72,  NA, NA,\n  \"85-1011\", \"G\", 0.51, 0.53, 0.43, 0.47, 0.32, \n  \"85-C\", \"a\", 1.02, 1.02, 1.01, 1.02, 1.02, \n  \"85-C\", \"d2\", 0.12, 1.28, 17.74,  NA, NA,\n  \"85-C\", \"G\", 0.47, 0.41, 0.31, 0.30, 0.30, \n  \"9192-0405\", \"a\", 1.02, 1.02, 1.01, 1.01, 1.00, \n  \"9192-0405\", \"d2\", 0.12, 1.45, 20.68,  NA, NA,\n  \"9192-0405\", \"G\", 0.42, 0.51, 0.41, 0.36, 0.29, \n  \"9192-0607\", \"a\", 1.03, 1.05, 1.02, 1.01, 1.01, \n  \"9192-0607\", \"d2\", 0.12, 1.52, 19.42,  NA, NA,\n  \"9192-0607\", \"G\", 0.46, 0.43, 0.43, 0.37, 0.27, \n  \"9192-0809\", \"a\", 1.03, 1.04, 1.01, 1.01, 1.00, \n  \"9192-0809\", \"d2\", 0.11, 1.44, 17.69,  NA, NA,\n  \"9192-0809\", \"G\", 0.47, 0.51, 0.44, 0.46, 0.41, \n  \"9192-1011\", \"a\", 1.02, 1.03, 1.01, 1.00, 1.00, \n  \"9192-1011\", \"d2\", 0.13, 1.64, 15.32,  NA, NA,\n  \"9192-1011\", \"G\", 0.49, 0.52, 0.47, 0.43, 0.32, \n  \"9192-C\", \"a\", 1.04, 1.02, 1.03, 1.01, 1.01, \n  \"9192-C\", \"d2\", 0.12, 1.41, 14.50,  NA, NA,\n  \"9192-C\", \"G\", 0.46, 0.44, 0.43, 0.39, 0.28, \n  \"97-0809\", \"a\", 1.06, 1.04, 1.01, 1.01, 1.00, \n  \"97-0809\", \"d2\", 0.12, 1.81, 20.35,  NA, NA,\n  \"97-0809\", \"G\", 0.46, 0.52, 0.46, 0.47, 0.45, \n  \"97-1011\", \"a\", 1.11, 1.29, 1.01, 1.01, 1.04, \n  \"97-1011\", \"d2\", 0.11, 1.46, 18.49,  NA, NA,\n  \"97-1011\", \"G\", 0.48, 0.56, 0.46, 0.42, 0.41, \n  \"97-C\", \"a\", 1.02, 1.01, 1.03, 1.08, 1.00, \n  \"97-C\", \"d2\", 0.12, 1.40, 18.63,  NA, NA,\n  \"97-C\", \"G\", 0.39, 0.36, 0.44, 0.37, 0.37, \n)\n\n# Currently this function summarizes data across all Glebocki plots, I could #\n# adapt this later if I only want to include some plots.\nsummarize_glebocki &lt;- function(data) {\n  data |&gt;\n    dplyr::group_by(parameter) |&gt;\n    dplyr::summarize(across(where(is.numeric), ~round(mean(.x), 2))) |&gt;\n    dplyr::mutate(source = \"glebocki\", .before = 1)\n}\n\nparams2 &lt;- dplyr::bind_rows(params, summarize_glebocki(glebocki)) |&gt; \n  dplyr::arrange(parameter)\n\n\nA study of Sierra Nevada conifers found these values to vary by species, and estimates of fuel loading ranged from 40% less to 8% more than when using those suggested by Brown (1974). A study of young, treated redwood and Douglas-fir stands (Glebocki 2015) found similar values for G to those of Brown (1974), and values for a much closer to those of Van Wagtendonk, Benedict, and Sydoriak (1996) (Table 3.1).\n\n\n\n\nTable 3.1: Physical properties of woody fuel particles used for calculating fuel loading from several different sources in the literature.\n\n\nsource\nparameter\nonehr\ntenhr\nhundhr\nthoushr_s\nthoushr_r\n\n\n\n\nbrown\nG\n0.48\n0.48\n0.40\n0.40\n0.30\n\n\nvanwagtendonk\nG\n0.58\n0.57\n0.53\n0.47\n0.36\n\n\nglebocki\nG\n0.46\n0.48\n0.42\n0.40\n0.33\n\n\nbrown\na\n1.13\n1.13\n1.13\n1.00\n1.00\n\n\nvanwagtendonk\na\n1.03\n1.02\n1.02\n1.02\n1.02\n\n\nglebocki\na\n1.04\n1.05\n1.02\n1.02\n1.01\n\n\nbrown\nd2\n0.10\n1.86\n17.81\nNA\nNA\n\n\nvanwagtendonk\nd2\n0.12\n1.28\n14.52\nNA\nNA\n\n\nglebocki\nd2\n0.12\n1.44\n18.52\nNA\nNA\n\n\n\n\n\n\nThe above information will allow us to calculate fuel loading for fine and coarse woody debris. First we’ll load our data and get the FWD (and the fuel particle parameters) in a long format for easier calculations.\n\nsource(\"./scripts/process_datasheets.r\")\nd &lt;- combine_fuels_datasheets(\"../data\")\n\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\n\n\nWarning: Duplicates detected in `transects`\ncamp6 ld e 315: 2\ncamp6 ld n 315: 2\ncamp6 ld s 315: 2\ncamp6 ld w 315: 2\n\n\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\nJoining with `by = join_by(transect)`\n\n# use this to reduce the amount of typing when referring to transects\ntransectid &lt;- c(\"site\", \"treatment\", \"corner\", \"azi\")\n\nget_particle_params &lt;- function(params = params2, source) {\n  params[params$source == source, !names(params) %in% \"source\"] |&gt;\n    tidyr::pivot_longer(-c(parameter), names_to = \"class\") |&gt;\n    tidyr::pivot_wider(names_from = parameter, values_from = value)\n}\n\nd1 &lt;- d$transects |&gt;\n  select(all_of(transectid), slope, matches(\"one|ten|hun\")) |&gt;\n  left_join(select(d$plots, site, treatment, matches(\"one|ten|hun\"))) |&gt;\n  # move onehr, tenhr, etc to new column and create new columns for transect\n  # length and particle counts\n  pivot_longer(\n    matches(\"count|len\"),\n    names_to = c(\"class\", \".value\"),\n    names_sep = \"_\"\n  ) |&gt;\n  left_join(get_particle_params(source = \"glebocki\"))\n\nJoining with `by = join_by(site, treatment)`\nJoining with `by = join_by(class)`\n\n\nFine woody debris fuel loading can then be calculated.\n\nfwd &lt;- d1 |&gt;\n  mutate(\n    load = simple_load(\n      sum_d2 = count * d2,\n      l = length,\n      percent_slope = slope,\n      G = G,\n      a = a\n    )\n  )\n\nCoarse woody debris is already in a long format so we don’t need to pivot longer, but we will summarize the data for each transect by getting the sum of squared diameters. Also, we only have parameters for “sound” and “rotten” particles, so anything over decay class 3 will be considered “rotten”. Finally, we need to join in transect slopes, and transect lengths.\n\n# TODO: fix camp6 ld azimuths\nsource(\"./scripts/test_funs.r\")\nwarn_duplicates(d$transects, site, treatment, corner, azi)\n\nWarning: Duplicates detected in `d$transects`\ncamp6 ld e 315: 2\ncamp6 ld n 315: 2\ncamp6 ld s 315: 2\ncamp6 ld w 315: 2\n\n\n\nd$coarse_woody |&gt;\n  mutate(class = if_else(decay &gt; 3, \"thoushr_r\", \"thoushr_s\")) |&gt;\n  group_by(site, treatment, corner, azi, class) |&gt;\n  summarize(sum_d2 = sum(dia^2), .groups = \"drop\") |&gt;\n  left_join(d$transects[c(transectid, \"slope\")]) |&gt;\n  left_join(d$plots[c(\"site\", \"treatment\", \"thoushr_length\")]) |&gt;\n  left_join(get_particle_params(source = \"glebocki\")) |&gt;\n  mutate(\n    load = simple_load(\n      sum_d2 = sum_d2,\n      G = G,\n      a = a,\n      l = thoushr_length,\n      percent_slope = slope\n    )\n  )\n\nJoining with `by = join_by(site, treatment, corner, azi)`\n\n\nWarning in left_join(summarize(group_by(mutate(d$coarse_woody, class = if_else(decay &gt; : Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 22 of `x` matches multiple rows in `y`.\nℹ Row 8 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n\n\nJoining with `by = join_by(site, treatment)`\nJoining with `by = join_by(class)`\n\n\n# A tibble: 152 × 12\n   site  treatment corner   azi class    sum_d2 slope thoushr_length     G     a\n   &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 camp6 gs        e        225 thoushr…  173      72             10  0.4   1.02\n 2 camp6 gs        e        315 thoushr…   72.2     1             10  0.33  1.01\n 3 camp6 gs        e        315 thoushr… 1178.      1             10  0.4   1.02\n 4 camp6 gs        n        135 thoushr…  216.      2             10  0.33  1.01\n 5 camp6 gs        n        135 thoushr…  550.      2             10  0.4   1.02\n 6 camp6 gs        n        225 thoushr…  676       4             10  0.4   1.02\n 7 camp6 gs        s        315 thoushr…  254.      4             10  0.33  1.01\n 8 camp6 gs        s        315 thoushr…  293.      4             10  0.4   1.02\n 9 camp6 gs        w        135 thoushr…  424.     17             10  0.33  1.01\n10 camp6 gs        w        135 thoushr…  882.     17             10  0.4   1.02\n# ℹ 142 more rows\n# ℹ 2 more variables: d2 &lt;dbl&gt;, load &lt;dbl&gt;\n\n\n\n\n\n\nBrown, James K. 1974. “Handbook for Inventorying Downed Woody Material.” Gen. Tech. Rep. INT-16. Ogden, UT: US Department of Agriculture, Forest Service, Intermountain Forest and Range Experiment Station. 24 p. 16.\n\n\nGlebocki, Radoslaw. 2015. “Fuel Loading and Moisture Dynamics in Thinned Coast Redwood Forests in Headwaters Forest Reserve, California.” Master’s thesis, Humboldt State University. https://scholarworks.calstate.edu/concern/theses/ws859j014.\n\n\nVan Wagner, C. E. 1982. “Practical Aspects of the Line Intersect Method.” PI-X-12. Chalk River, Ontario, Canada: Petawawa National Forestry Institute, Canadian Forestry Service.\n\n\nVan Wagtendonk, J. W., J. M. Benedict, and W. M. Sydoriak. 1996. “Physical Properties of Woody Fuel Particles of Sierra Nevada Conifers.” International Journal of Wildland Fire 6 (3): 117–23. https://doi.org/10.1071/wf9960117."
  },
  {
    "objectID": "work_log.html",
    "href": "work_log.html",
    "title": "4  Work log",
    "section": "",
    "text": "The following is a log of the work completed for this project\n\n2023-06-05\n\nStart calculate fuel loading\nsome background research on the theory behind planar intercept\ncompile fuel particle parameters from multiple sources\n\n\n\n2023-06-01\n\nFinish data entry\n\n\n\n2023-05-31\n\nFigure showing fuel (and vegetation) sampling layout\nFunction to combine data from all datasheets\nRefine data description text\ncontinued data entry\n\n\n\n2023-5-26\n\nDeveloped data input format\n\none file for each plot\n\nCreated R function to ingest a datasheet in the specified format\nDocumented the input format and processing function\nFuel data entered for 7 replicates\n\n\n\n2023-05-23\n\nwork on development environment for coding\n\n\n\n2023-05-22\n\nInitialized project as a quarto book\n\nlearning to use Quarto building analysis website\nset up GitHub repository\nstart log to track progress"
  }
]